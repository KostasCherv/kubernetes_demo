apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: product-service-role
  namespace: k8s-microservices
  labels:
    app.kubernetes.io/name: product-service
    app.kubernetes.io/component: rbac
rules:
# Allow reading own ConfigMap
- apiGroups: [""]
  resources: ["configmaps"]
  resourceNames: ["product-service-config"]
  verbs: ["get"]
# Allow reading database secret
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames: ["postgres-secret"]
  verbs: ["get"]

